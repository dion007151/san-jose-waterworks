<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carrot-Style Weather App with Hourly Forecast</title>
<style>
/* Reset */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:"Segoe UI", Roboto, Arial, sans-serif;height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;background:#000;color:#fff;transition:background 1s;}
/* Background video */
#bg-video{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-3;}

/* Clouds */
.cloud{position:absolute;width:200px;opacity:0.7;animation:moveClouds linear infinite;z-index:-2;}
.c1{top:15%;left:-300px;animation-duration:70s;}
.c2{top:35%;left:-400px;animation-duration:100s;}
.c3{top:55%;left:-500px;animation-duration:140s;}
@keyframes moveClouds{from{left:-500px}to{left:110%;}}

/* App card */
#app{
  width:400px;padding:2rem;border-radius:20px;background:rgba(255,255,255,0.12);backdrop-filter:blur(15px);
  box-shadow:0 8px 24px rgba(0,0,0,0.45);text-align:center;z-index:1;max-height:90vh;overflow:hidden;
}
h2{font-size:2rem;margin-bottom:1rem;font-weight:600;color:#fff;text-shadow:0 1px 5px rgba(0,0,0,0.4);}
input{width:92%;padding:0.7rem;border-radius:10px;border:none;font-size:1.05rem;outline:none;margin-bottom:0.8rem;transition:0.2s;}
input:focus{box-shadow:0 0 10px rgba(0,123,255,0.7);}

/* Buttons */
.button-group{display:flex;gap:0.5rem;justify-content:center;flex-wrap:wrap;margin-bottom:0.7rem;}
button{padding:0.7rem 1.4rem;border-radius:12px;border:none;font-weight:600;background:linear-gradient(135deg,#00b3ff,#0077cc);color:#fff;cursor:pointer;transition:transform .2s,box-shadow .2s;}
button:hover{transform:translateY(-2px);box-shadow:0 8px 16px rgba(0,0,0,0.35);}
button:active{transform:translateY(1px);}

/* Result */
#result{margin-top:1rem;font-size:1rem;opacity:0;transform:translateY(12px);transition:opacity .5s,transform .5s;position:relative;}
#result.show{opacity:1;transform:translateY(0);}
.weather-emoji{font-size:2.8rem;margin:0.35rem 0;display:block;animation:bounce 1s infinite;}
.tips{margin-top:0.8rem;font-size:0.95rem;color:#ffd700;}

/* Error */
.error{color:#ff4d4d;font-weight:600;}

/* Forecast */
.forecast-wrap{margin-top:1rem;display:flex;align-items:center;gap:8px;position:relative;}
#forecast, #hourlyForecast{display:flex;gap:0.6rem;overflow-x:auto;scroll-behavior:smooth;opacity:0;transition:opacity .5s;}
#forecast::-webkit-scrollbar, #hourlyForecast::-webkit-scrollbar{height:6px;}
#forecast::-webkit-scrollbar-thumb, #hourlyForecast::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.2);border-radius:10px;}
.forecast-day, .hourly-hour{flex:0 0 80px;background:rgba(255,255,255,0.18);padding:0.5rem;border-radius:12px;font-size:0.82rem;text-align:center;backdrop-filter:blur(6px);opacity:0;transform:translateX(20px);transition:all .4s ease;}
.forecast-day.show, .hourly-hour.show{opacity:1;transform:translateX(0);}
.forecast-day .emoji, .hourly-hour .emoji{font-size:1.4rem;margin:0.2rem 0;}

/* Arrow Buttons */
.f-btn{width:36px;height:36px;border-radius:8px;border:none;background:rgba(255,255,255,0.12);color:#fff;font-size:22px;cursor:pointer;flex:0 0 auto;display:none;align-items:center;justify-content:center;transition:background .15s, transform .15s;}
.f-btn.show{display:flex;}
.f-btn:hover{background:rgba(255,255,255,0.25);transform:translateY(-2px);}

/* Live Radar */
#radarOverlay{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.6);z-index:99;justify-content:center;align-items:center;overflow:hidden;backdrop-filter:blur(6px);}
#radarOverlay iframe{border:none;width:95%;height:95%;border-radius:15px;box-shadow:0 8px 24px rgba(0,0,0,0.5);}
#closeRadar{position:absolute;top:12px;right:20px;font-size:1.8rem;font-weight:bold;color:#fff;background:rgba(255,255,255,0.15);border:none;border-radius:8px;padding:6px 12px;cursor:pointer;transition:all .2s;}
#closeRadar:hover{background:rgba(255,255,255,0.35);transform:scale(1.1);}

/* Bounce animation */
@keyframes bounce {0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}

/* Shimmer for loading */
@keyframes shimmer {0%{background-position:-200% 0;}100%{background-position:200% 0;}}

/* Media */
@media(max-width:420px){#app{width:92%;}.forecast-day,.hourly-hour{flex:0 0 76px;font-size:0.78rem;}}
</style>
</head>
<body>

<video autoplay muted loop id="bg-video">
  <source src="cloud video.mp4" type="video/mp4">
  Your browser does not support video.
</video>

<img src="airplane.png" class="cloud c1" alt="cloud">
<img src="cloud-blue-sky bg.png" class="cloud c2" alt="cloud">
<img src="cloud-blue-sky bg.png" class="cloud c3" alt="cloud">

<div id="app">
  <h2>Flores Weather App</h2>
  <input id="city" type="text" placeholder="Enter city name">
  <div class="button-group">
    <button id="getWeather">Check Weather</button>
    <button id="liveForecast">Live Radar</button>
  </div>

  <div id="result"></div>
  <div class="tips" id="tips"></div>

  <div class="forecast-wrap">
    <button id="fLeft" class="f-btn">‚Äπ</button>
    <div id="forecast"></div>
    <button id="fRight" class="f-btn">‚Ä∫</button>
  </div>

  <h3 style="margin-top:1rem;">Hourly Forecast</h3>
  <div class="forecast-wrap">
    <button id="hLeft" class="f-btn">‚Äπ</button>
    <div id="hourlyForecast"></div>
    <button id="hRight" class="f-btn">‚Ä∫</button>
  </div>
</div>

<div id="radarOverlay">
  <button id="closeRadar">‚úï</button>
  <iframe src=""></iframe>
</div>

<script>
// Weather descriptions with funny messages
const weatherCodeDescriptions = {
  0: { text:"Clear sky", emoji:"‚òÄÔ∏è", tip:"Great day for outdoor activities!", funny:"Look at you, Mr. Sun Chaser!"},
  1: { text:"Mainly clear", emoji:"üå§Ô∏è", tip:"Nice weather!", funny:"Mostly clear, mostly awesome, mostly you!"},
  2: { text:"Partly cloudy", emoji:"‚õÖ", tip:"Some clouds, still good outside.", funny:"A few clouds are blocking your glory."},
  3: { text:"Overcast", emoji:"‚òÅÔ∏è", tip:"Cloudy day, take care of lighting.", funny:"It's gloomier than your Monday morning."},
  45:{ text:"Fog", emoji:"üå´Ô∏è", tip:"Drive carefully in fog.", funny:"Can't see a thing? Welcome to the misty mystery."},
  51:{ text:"Light drizzle", emoji:"üå¶Ô∏è", tip:"Carry a light umbrella.", funny:"A tiny sprinkle won't ruin you."},
  61:{ text:"Slight rain", emoji:"üåßÔ∏è", tip:"Bring an umbrella.", funny:"Drizzle drizzle, not sizzle sizzle."},
  63:{ text:"Moderate rain", emoji:"üåßÔ∏è", tip:"Rainy day, plan indoor activities.", funny:"Rain is falling, you are indoors, right?"},
  65:{ text:"Heavy rain", emoji:"üåßÔ∏è", tip:"Stay indoors if possible.", funny:"Aquaman called, he wants his rain back."},
  71:{ text:"Slight snow fall", emoji:"üå®Ô∏è", tip:"Watch out for slippery surfaces.", funny:"Snowflakes are falling, magic incoming!"},
  75:{ text:"Heavy snow fall", emoji:"‚ùÑÔ∏è", tip:"Stay warm and safe indoors.", funny:"Winter wonderland outside, cozy inside."},
  95:{ text:"Thunderstorm", emoji:"‚õàÔ∏è", tip:"Avoid outdoor activities.", funny:"Mother Nature is throwing a tantrum!"},
  96:{ text:"Thunderstorm with hail", emoji:"üå©Ô∏è", tip:"Dangerous weather, stay inside.", funny:"Balls of ice falling from the sky, no thanks!"},
  99:{ text:"Severe", emoji:"üå™Ô∏è", tip:"Extreme conditions! Take all precautions.", funny:"Extreme conditions! Only superheroes go out."}
};

// DOM elements
const btn=document.getElementById('getWeather');
const liveBtn=document.getElementById('liveForecast');
const result=document.getElementById('result');
const forecast=document.getElementById('forecast');
const hourlyForecast=document.getElementById('hourlyForecast');
const tips=document.getElementById('tips');
const cityInput=document.getElementById('city');
const fLeft=document.getElementById('fLeft');
const fRight=document.getElementById('fRight');
const hLeft=document.getElementById('hLeft');
const hRight=document.getElementById('hRight');
const radarOverlay=document.getElementById('radarOverlay');
const closeRadar=document.getElementById('closeRadar');
const iframeRadar = radarOverlay.querySelector('iframe');

let lastCity='', lastCoords={}, lastWeather={};

cityInput.addEventListener('keypress',e=>{if(e.key==='Enter')btn.click();});
btn.addEventListener('click',()=>{searchCity(cityInput.value.trim());});
liveBtn.addEventListener('click',showRadar);
closeRadar.addEventListener('click',()=>{radarOverlay.style.display='none';});
fLeft.addEventListener('click',()=>forecast.scrollBy({left:-180,behavior:'smooth'}));
fRight.addEventListener('click',()=>forecast.scrollBy({left:180,behavior:'smooth'}));
hLeft.addEventListener('click',()=>hourlyForecast.scrollBy({left:-180,behavior:'smooth'}));
hRight.addEventListener('click',()=>hourlyForecast.scrollBy({left:180,behavior:'smooth'}));

function searchCity(city){
  if(!city){result.innerHTML='<p class="error">Please enter a city name.</p>'; result.classList.add('show'); return;}
  lastCity=city;
  result.innerHTML='<div style="height:80px;border-radius:12px;background:linear-gradient(90deg,#ffffff20,#ffffff50,#ffffff20);background-size:200% 100%;animation:shimmer 1.2s infinite;"></div>';
  result.classList.add('show');
  fetchCoordinates(city);
}

async function fetchCoordinates(city){
  try{
    const resp = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(city)}&limit=1`);
    const data = await resp.json();
    if(!data.length){result.innerHTML='<p class="error">City not found.</p>'; return;}
    const {lat,lon,display_name} = data[0];
    lastCoords = {lat, lon};
    fetchWeather(lat, lon, display_name);
  }catch(e){result.innerHTML='<p class="error">Error fetching location.</p>';}
}

async function fetchWeather(lat,lon,name){
  try{
    const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode&hourly=temperature_2m,weathercode,windspeed_10m&timezone=auto`;
    const resp = await fetch(url);
    const data = await resp.json();
    lastWeather = data.current_weather;
    displayCurrent(data.current_weather,name);
    displayForecast(data.daily);
    displayHourly(data.hourly);
    setBackground(data.current_weather.weathercode);
  }catch(e){result.innerHTML='<p class="error">Error fetching weather data.</p>';}
}

function displayCurrent(weather,name){
  const info=weatherCodeDescriptions[weather.weathercode]||{text:"Unknown",emoji:"‚ùì",tip:"",funny:""};
  const tempC=Math.round(weather.temperature);
  const tempF=Math.round(tempC*9/5+32);
  const timeStr=new Date(weather.time).toLocaleString();
  result.innerHTML=`
    <h3>${name}</h3>
    <span class="weather-emoji">${info.emoji}</span>
    <p><strong>Temperature:</strong> üå°Ô∏è ${tempC}¬∞C / ${tempF}¬∞F</p>
    <p><strong>Wind Speed:</strong> üí® ${weather.windspeed} km/h</p>
    <p><strong>Condition:</strong> ${info.text}</p>
    <p><em>üïí ${timeStr}</em></p>`;
  tips.innerHTML=info.tip + "<br><em>" + info.funny + "</em>";
  result.classList.add('show');
}

function displayForecast(daily){
  forecast.innerHTML='';
  const days=Math.min(daily.time.length,7);
  for(let i=0;i<days;i++){
    const date=new Date(daily.time[i]).toLocaleDateString(undefined,{weekday:'short',month:'short',day:'numeric'});
    const code=daily.weathercode[i];
    const info=weatherCodeDescriptions[code]||{text:'?',emoji:'‚ùì'};
    const minC=Math.round(daily.temperature_2m_min[i]);
    const maxC=Math.round(daily.temperature_2m_max[i]);
    const card=document.createElement('div');
    card.className='forecast-day';
    card.innerHTML=`<div>${date}</div><span class="emoji">${info.emoji}</span><div>${minC}¬∞C - ${maxC}¬∞C</div>`;
    forecast.appendChild(card);
    setTimeout(()=>card.classList.add('show'),i*150);
  }
  setTimeout(()=>{fLeft.classList.add('show');fRight.classList.add('show');forecast.style.opacity=1;},days*150+200);
}

function displayHourly(hourly){
  hourlyForecast.innerHTML='';
  const hoursToShow = 24;
  for(let i=0;i<hoursToShow;i++){
    const date=new Date(hourly.time[i]).toLocaleTimeString(undefined,{hour:'2-digit',minute:'2-digit'});
    const code=hourly.weathercode[i];
    const info=weatherCodeDescriptions[code]||{text:'?',emoji:'‚ùì',funny:''};
    const tempC=Math.round(hourly.temperature_2m[i]);
    const card=document.createElement('div');
    card.className='hourly-hour';
    card.innerHTML=`<div>${date}</div><span class="emoji">${info.emoji}</span><div>${tempC}¬∞C</div>`;
    hourlyForecast.appendChild(card);
    setTimeout(()=>card.classList.add('show'),i*100);
  }
  setTimeout(()=>{hLeft.classList.add('show');hRight.classList.add('show');hourlyForecast.style.opacity=1;},hoursToShow*100+200);
}

function showRadar(){
  if(!lastCity){result.innerHTML='<p class="error">Please search a city first.</p>'; return;}
  const {lat, lon} = lastCoords;
  radarOverlay.style.display='flex';
  iframeRadar.style.opacity='0';
  iframeRadar.onload = () => iframeRadar.style.opacity = '1';
  iframeRadar.src = `https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&zoom=6&level=surface&overlay=rain&menu=&message=true&marker=&calendar=now&pressure=true&type=map&detail=true&detailLat=${lat}&detailLon=${lon}&metricWind=km%2Fh&metricTemp=%C2%B0C&radarRange=-1`;
}

// ‚úÖ Dynamic video background switching
function setBackground(code){
  const video = document.getElementById("bg-video");
  switch(code){
    case 0:  video.src = "sunny.mp4"; break;
    case 61: video.src = "rain.mp4"; break;
    case 95: video.src = "storm.mp4"; break;
    case 71: video.src = "snow.mp4"; break;
    default: video.src = "cloud video.mp4"; break;
  }
}
</script>
</body>
</html>
